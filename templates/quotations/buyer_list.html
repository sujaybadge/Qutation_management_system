{% extends "base.html" %}
{% block title %}Customers{% endblock %}
{% block content %}
<div class="page-header">
    <div>
        <h1 class="page-title">Customers</h1>
        <p class="page-subtitle">Manage customers and view their quotations.</p>
    </div>
    <div class="actions">
        <a class="btn" href="{% url 'quotations:buyer_create' %}">+ New customer</a>
        <a class="btn-secondary btn" href="{% url 'quotations:list' %}">Quotations</a>
    </div>
</div>

<div class="panel">
    <table class="table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Phone</th>
                <th>Email</th>
                <th>GSTIN</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for b in buyers %}
            <tr>
                <td>{{ b.name }}</td>
                <td>{{ b.phone }}</td>
                <td>{{ b.email }}</td>
                <td>{{ b.gstin }}</td>
                <td class="actions">
                    <a class="btn" href="{% url 'quotations:buyer_quotes' b.id %}">Quotes</a>
                    <a class="btn-secondary btn" href="{% url 'quotations:buyer_edit' b.id %}">Edit</a>
                    <form method="post" action="{% url 'quotations:buyer_delete' b.id %}" style="display:inline" onsubmit="return confirm('Delete this customer?');">
                        {% csrf_token %}
                        <button class="btn btn-danger" type="submit">Delete</button>
                    </form>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="5" class="empty">No customers yet.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
